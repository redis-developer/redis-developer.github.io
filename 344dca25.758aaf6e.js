(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{124:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return a})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return l}));var o=n(3),r=n(7),i=(n(0),n(284)),s={id:"index-storing-complex-json-document",title:"Storing and retrieving Nested JSON document",sidebar_label:"Storing and retrieving Nested JSON document",slug:"/howtos/redisjson/storing-complex-json-document",authors:["ajeet"]},a={unversionedId:"howtos/redisjson/storing-complex-json-document/index-storing-complex-json-document",id:"howtos/redisjson/storing-complex-json-document/index-storing-complex-json-document",isDocsHomePage:!1,title:"Storing and retrieving Nested JSON document",description:"JSON(a.k.a JavaScript Object Notation) is a format for sharing data. A JSON object is a key-value data format that is typically rendered in curly braces. When you\u2019re working with JSON, you\u2019ll likely see JSON objects in a .json file, but they can also exist as a JSON object or string within the context of a program.",source:"@site/docs/howtos/redisjson/storing-complex-json-document/index-storing-complex-json-document.mdx",slug:"/howtos/redisjson/storing-complex-json-document",permalink:"/howtos/redisjson/storing-complex-json-document",editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/redisjson/storing-complex-json-document/index-storing-complex-json-document.mdx",version:"current",sidebar_label:"Storing and retrieving Nested JSON document",sidebar:"docs",previous:{title:"How to visualize JSON data using RedisInsight",permalink:"/howtos/redisjson/using-redisinsight"},next:{title:"Indexing JSON document using RediSearch",permalink:"/howtos/redisjson/jsonind-document"}},c=[{value:"Example of Nested JSON object",id:"example-of-nested-json-object",children:[{value:"Step 1. Run RedisJSON Docker container",id:"step-1-run-redisjson-docker-container",children:[]},{value:"Step 2. Verify if RedisJSON module is loaded",id:"step-2-verify-if-redisjson-module-is-loaded",children:[]},{value:"Step 3. Nested JSON",id:"step-3-nested-json",children:[]},{value:"Step 4. Load Redis Module",id:"step-4-load-redis-module",children:[]},{value:"Step 5. Execute the python script",id:"step-5-execute-the-python-script",children:[]},{value:"Step 6. Verify the JSON objects gets added to Redis",id:"step-6-verify-the-json-objects-gets-added-to-redis",children:[]},{value:"Step 7. Fetching the specific fields",id:"step-7-fetching-the-specific-fields",children:[]},{value:"Step 8. Verifying the results",id:"step-8-verifying-the-results",children:[]},{value:"References",id:"references",children:[]}]}],d={toc:c};function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"JSON(a.k.a JavaScript Object Notation) is a format for sharing data. A JSON object is a key-value data format that is typically rendered in curly braces. When you\u2019re working with JSON, you\u2019ll likely see JSON objects in a .json file, but they can also exist as a JSON object or string within the context of a program."),Object(i.b)("p",null,"Nested JSON is a JSON file with a big portion of its values being other JSON objects. Compared with Simple JSON, Nested JSON provides higher clarity in that it decouples objects into different layers, making it easier to maintain. "),Object(i.b)("h2",{id:"example-of-nested-json-object"},"Example of Nested JSON object"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{}),'employee = {\n     \'name\': "Paul",\n     \'Age\': \'25\',\n     \'Location\': "USA",\n     \'Address\':\n        {\n          "longitude": "-113.6335371",\n          "latitude": "37.1049502",\n          "postal code": "90266"\n        }\n   }\n')),Object(i.b)("p",null,"Follow the below steps to understand how nested JSON objects can be imported into Redis database:"),Object(i.b)("h3",{id:"step-1-run-redisjson-docker-container"},"Step 1. Run RedisJSON Docker container"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"})," docker run -p 6379:6379 --name redis-redisjson redislabs/rejson:latest\n")),Object(i.b)("h3",{id:"step-2-verify-if-redisjson-module-is-loaded"},"Step 2. Verify if RedisJSON module is loaded"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"})," redis-cli\n 127.0.0.1:6379> info modules\n # Modules\n module:name=ReJSON,ver=10007,api=1,filters=0,usedby=[],using=[],options=[]\n 127.0.0.1:6379> \n")),Object(i.b)("h3",{id:"step-3-nested-json"},"Step 3. Nested JSON"),Object(i.b)("p",null,"Below is a python code for nested JSON document:"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-python"})," import redis\n import json\n \n employee = {\n     'name': \"Paul\",\n     'Age': '25',\n     'Location': \"USA\",\n     'Address': \n        {\n          \"longitude\": \"-113.6335371\",\n          \"latitude\": \"37.1049502\",\n          \"postal code\": \"90266\"\n        }\n   }\n r = redis.StrictRedis()\n r.execute_command('JSON.SET', 'record', '.', json.dumps(employee))\n reply = json.loads(r.execute_command('JSON.GET', 'record'))\n")),Object(i.b)("p",null,"Copy the code and save it in a file called ",Object(i.b)("inlineCode",{parentName:"p"},"employee.py")),Object(i.b)("h3",{id:"step-4-load-redis-module"},"Step 4. Load Redis Module"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"})," pip  install rejson\n")),Object(i.b)("h3",{id:"step-5-execute-the-python-script"},"Step 5. Execute the python script"),Object(i.b)("p",null,"Execute the below script and ensure that it executes successfully."),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"})," python3 employee.py\n")),Object(i.b)("h3",{id:"step-6-verify-the-json-objects-gets-added-to-redis"},"Step 6. Verify the JSON objects gets added to Redis"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),' redis-cli\n 127.0.0.1:6379> JSON.GET record\n "{\\"name\\":\\"Paul\\",\\"Age\\":\\"25\\",\\"Location\\":\\"USA\\",\\"Address\\":[{\\"longitude\\":\\"-113.6335371\\",\\"latitude\\":\\"37.1049502\\",\\"postal code\\":\\"90266\\"}]}"\n')),Object(i.b)("h3",{id:"step-7-fetching-the-specific-fields"},"Step 7. Fetching the specific fields"),Object(i.b)("p",null,"In case you want to fetch specific filed (like address), then the code would look like this:"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-python"})," import redis\n import json\n\n employee = {\n     'name': \"Paul\", \n     'Age': '25', \n     'Location': \"USA\",\n     'Address': \n        {\n          \"longitude\": \"-113.6335371\",\n          \"latitude\": \"37.1049502\",\n          \"postal code\": \"90266\"\n        }\n              \n  }\n r = redis.StrictRedis()\n r.execute_command('JSON.SET', 'record', '.', json.dumps(employee))\n reply = json.loads(r.execute_command('JSON.GET', 'record', '.Address.longitude'))\n")),Object(i.b)("h3",{id:"step-8-verifying-the-results"},"Step 8. Verifying the results"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),'  redis-cli\n  127.0.0.1:6379> JSON.GET record .Address.longitude\n  "\\"-113.6335371\\""\n')),Object(i.b)("h3",{id:"references"},"References"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(o.a)({parentName:"li"},{href:"https://university.redis.com/courses/ru204/"}),"RU204: Storing, Querying and Indexing JSON at Speed")," - a course at Redis University"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(o.a)({parentName:"li"},{href:"/howtos/redisjson/using-nodejs"}),"Importing JSON data into Redis using NodeJS")),Object(i.b)("li",{parentName:"ul"},"Learn more about ",Object(i.b)("a",Object(o.a)({parentName:"li"},{href:"https://oss.redis.com/redisjson/"}),"RedisJSON")," in the Quickstart tutorial."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(o.a)({parentName:"li"},{href:"/howtos/redisjson/storing-complex-json-document"}),"How to store and retrieve nested JSON document")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(o.a)({parentName:"li"},{href:"/howtos/redisjson/using-nodejs"}),"Importing JSON data into Redis using NodeJS"))))}l.isMDXComponent=!0},284:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var o=n(0),r=n.n(o);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=r.a.createContext({}),l=function(e){var t=r.a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=l(e.components);return r.a.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),p=l(n),b=o,m=p["".concat(s,".").concat(b)]||p[b]||u[b]||i;return n?r.a.createElement(m,a(a({ref:t},d),{},{components:n})):r.a.createElement(m,a({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=b;var a={};for(var c in t)hasOwnProperty.call(t,c)&&(a[c]=t[c]);a.originalType=e,a.mdxType="string"==typeof e?e:o,s[1]=a;for(var d=2;d<i;d++)s[d]=n[d];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);