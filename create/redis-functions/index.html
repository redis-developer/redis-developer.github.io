<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Redis Developer Hub Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Redis Developer Hub Blog Atom Feed">
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-W8Z6BLQ",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><title data-react-helmet="true">Getting started with Redis Functions | Redis Developer Hub</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="/img/share.png"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting started with Redis Functions | Redis Developer Hub"><meta data-react-helmet="true" name="description" content="Getting started with Redis Functions"><meta data-react-helmet="true" property="og:description" content="Getting started with Redis Functions"><meta data-react-helmet="true" property="og:url" content="https://developer.redis.com/create/redis-functions"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com"><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&amp;family=Roboto+Mono:wght@400;500;600;700&amp;display=swap" rel="stylesheet"><link data-react-helmet="true" href="/css/redis-sitesearch.css" rel="stylesheet"><link data-react-helmet="true" href="/css/redis-sitesearch-overrides.css" rel="stylesheet"><link data-react-helmet="true" rel="canonical" href="https://developer.redis.com/create/redis-functions"><link rel="stylesheet" href="/styles.e96f0bb4.css">
<link rel="stylesheet" href="/main.c464a57b.css">
<link rel="preload" href="/styles.b8c9ebeb.js" as="script">
<link rel="preload" href="/runtime~main.1991f51a.js" as="script">
<link rel="preload" href="/main.63ac166d.js" as="script">
<link rel="preload" href="/1.69e91d25.js" as="script">
<link rel="preload" href="/2.498954a0.js" as="script">
<link rel="preload" href="/3.29c624a1.js" as="script">
<link rel="preload" href="/1be78505.b84ba4a0.js" as="script">
<link rel="preload" href="/935f2afb.e3521e56.js" as="script">
<link rel="preload" href="/17896441.59891c0c.js" as="script">
<link rel="preload" href="/a5b41932.aaa88fb3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8Z6BLQ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg width="24" height="18" xmlns="http://www.w3.org/2000/svg"><g stroke="#FFFFFF" stroke-width="1.65" fill="none" fill-rule="evenodd" stroke-dasharray="4.4" stroke-linecap="round" stroke-linejoin="round"><path d="M1 16.95h24.2M1 9.25h24.2M1 1.55h24.2"></path></g></svg></div><a class="navbar__brand" href="/"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar__items navbar__items--right"><div id="redis-sitesearch" class="redis-sitesearch redis-sitesearch-inline"><input class="redis-sitesearch-input"><div class="redis-sitesearch-result-list-wrapper"><ul class="redis-sitesearch-result-list"></ul><div class="redisearch-logo"></div></div></div><a class="navbar__item navbar__link" href="/create/rediscloud">Get started</a><a href="https://launchpad.redis.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Redis Launchpad</a><a href="https://redis.com/try-free/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Try Free</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/create/rediscloud">Get started</a></li><li class="menu__list-item"><a href="https://launchpad.redis.com" target="_blank" rel="noopener noreferrer" class="menu__link">Redis Launchpad</a></li><li class="menu__list-item"><a href="https://redis.com/try-free/" target="_blank" rel="noopener noreferrer" class="menu__link">Try Free</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Create</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create">Overview - All Quick Starts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/redis-stack">Redis Stack</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/create/redis-functions">Redis Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/rediscloud">Redis Enterprise Cloud</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis on Heroku</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku/portal">Redis on Heroku</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku/herokujava">How to deploy a Java based application on Heroku using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku/herokunodejs">How to deploy a NodeJS based application on Heroku using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku/herokupython">How to deploy a Python based application on Heroku using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku/ratelimiting-go">How to deploy a Redis Rate Limiting application on Heroku</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku/herokuruby">How to deploy a Ruby based application on Heroku using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/heroku/herokugo">How to deploy a Go based application on Heroku using Redis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis on Azure Cache</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/azure">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/azure/portal">Redis on Azure Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/azure/terraform-simple">Redis Enterprise with Terraform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/azure/terraform-private-endpoint">Azure Cache for Redis Enterprise using Terraform with Private Link</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/gcp">Redis on Google Cloud</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis on AWS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws/redis-on-aws">Redis on AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws/slackbot">Building a Slack Bot using AWS S3 and RediSearch from scratch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws/terraform">Deploy and Manage Redis Database on AWS using Terraform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws/bidding-on-aws">Building a Real-Time Bidding Platform using NodeJS, AWS Lambda and Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws/import/database-migration-aws-elasticache-redis-enterprise-cloud/">Online Data Migration from AWS Elasticache to Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws/chatapp">Building a Real-Time Chat application on AWS using Python and Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/aws/analytics-using-aws">Building an Analytics Dashboard using NodeJS, Redis and AWS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis on Docker</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/docker/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/docker/redis-on-docker">Redis on Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/docker/nodejs-nginx-redis">Node.js, Nginx, Redis and Docker</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis on Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/kubernetes/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/kubernetes/kubernetes-gke">Redis on Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/kubernetes/kubernetes-operator">Kubernetes Operator: What It Is and Why You Should Really Care About It</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/homebrew/">Redis on Mac OS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/windows">Redis on Windows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/from-source/">Redis from Source</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/jenkins">Redis using Jenkins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/create/openshift">Redis on Red Hat OpenShift Container Platform</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis using Netlify</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/netlify/getting-started-with-netlify">Getting Started with Netlify and Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/netlify/deploy-docusaurus-to-netlify">Deploy Docusaurus to Netlify in 5 Minutes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis using Vercel</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/vercel">Getting Started with Vercel and Redis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis using Cloud Run</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/cloudrun">Getting Started with Google Cloud Run and Redis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis using Azure Functions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/azurefunctions">Getting Started with Azure Functions and Redis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Redis using Portainer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create/portainer">Getting Started with Portainer and Redis</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Develop</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Spring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redis OM Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/redis-om/redis-om-spring">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/redis-om/redis-om-spring-json">Working with JSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/redis-om/redis-om-spring-hash">Working with Hashes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redis and Spring Course</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_1">Up and Running</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_2">Spring Data Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_3">Mapping &amp; Repositories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_4">User Roles &amp; Secondary Indexes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_5">Books, Categories &amp; The Catalog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_6">Domain Models w/ RedisJSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_7">Search w/ RediSearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_8">Recommendations w/ RedisGraph</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/redis-and-spring-course/lesson_9">Caching w/ Redis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Rate Limiting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/rate-limiting">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Fixed Window</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/rate-limiting/fixed-window">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/rate-limiting/fixed-window/reactive">Reactive Implementation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/rate-limiting/fixed-window/reactive-lua">Atomicity with Lua</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/java/spring/rate-limiting/fixed-window/reactive-gears">Atomicity with Gears</a></li></ul></li></ul></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/C/">C</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Node.js</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/gettingstarted">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Node.js Crash Course</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/node-crash-course">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/welcome">Welcome</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/whatisredis">What is Redis?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/redisandnodejs">Redis and Node.js</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/introducingredisinsight">Introducing RedisInsight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/sampleapplicationoverview">Sample Application Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/runningtheapplication">Running the Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/domainobjectswithhashes">Domain Objects with Hashes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/introductiontomodules">Introduction to Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/redisjson">RedisJSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/redisearch">RediSearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/checkinswithstreams">Checkins with Streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/managingsuccess">Managing Success</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/caching">Caching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/sessionstorage">Session Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/advancedstreams">Advanced Streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/redisbloom">RedisBloom</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/nodecrashcourse/coursewrapup">Wrap Up</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/node/redis-om">Redis OM for Node.js</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Python</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/python/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/python/fastapi">Redis with FastAPI</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">.NET</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ASP.NET Core</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Rate Limiting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/aspnetcore/rate-limiting/fixed-window">Fixed Window Rate Limiting app using ASP.NET</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/aspnetcore/rate-limiting/sliding-window">Sliding Window Rate Limiting app  using ASP.NET</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/aspnetcore/rate-limiting/middleware">Rate Limiting Middleware</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Caching</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/aspnetcore/rate-limiting/fixed-window">Basic API Caching using ASP.NET Core</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redis OM Dotnet</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/add-and-retrieve-objects">Add and Retrieve Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/searching/creating-an-index">Creating an Index</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Querying</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/simple-text-queries">Simple Text Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/searching/numeric-queries">Numeric Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/searching/geo-filters">Geo Filters</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Aggregations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/aggregations">Aggregations Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/aggregations/apply-functions">Apply Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/redis-om-dotnet/aggregations/groups/groups">Grouping and Reductions</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Streams</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/streams/stream-basics">Using Redis Streams with .NET</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Blocking Reads</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/streams/blocking-reads">Blocking Stream Reads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/streams/blocking-reads/service-stack">Blocking Stream Reads with ServiceStack.Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/dotnet/streams/blocking-reads/cs-redis">Blocking Stream Reads with CSRedis</a></li></ul></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/golang/">Go</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/ruby/">Ruby</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/php/">Php</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/develop/deno/">Deno</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Explore</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/what-is-redis">What is Redis?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/import/">Import Data into a Redis database</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RedisInsight v2.x</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsightv2">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsightv2/getting-started">Getting Started with RedisInsight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsightv2/windows">How to run RedisInsight on Windows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsightv2/browser">Visualize Redis Database keys using the RedisInsight Browser Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsightv2/profiler">RedisInsight Profiler Tool - Analyze Your Redis Commands Using Redis Monitor Command</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsightv2/redisearch">Perform Database Search and Analytics using the RediSearch Plugin in RedisInsight v2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RedisInsight v1.x</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/getting-started">Getting Started with RedisInsight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/browser">Visualize Redis database keys using RedisInsight Browser Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/slowlog">Debug Redis using RedisInsight Slowlog Debugging Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/memoryanalyzer">Optimize &amp; Analyze Redis using RedisInsight Memory Analyzer Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/cluster">Manage Your Redis Cluster using RedisInsight Cluster Management Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/streams">Use Redis Streams Consumer Groups with RedisInsight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/profiler">RedisInsight Profiler Tool - Analyze Your Redis Commands Using Redis Monitor Command</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/redisgraph">Query, Visualize and Manipulate Graphs using RedisGraph Browser Visualization Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/redisgears">Write Your Serverless Redis function using RedisGears Browser Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/redistimeseries">Manage Redis time-series data using RedisTimeSeries Browser Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/redisearch">Perform Database Search and Analytics using RediSearch Browser Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/autodiscover">Utilize Elasticache Auto Discovery For Redis with RedisInsight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisinsight/usinghelm">Installing RedisInsight using Helm</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisdatasource">Redis Data Source for Grafana</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redisexplorer">Grafana Dashboards for Redis Enterprise Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/datadog">Redis Enterprise Observability with Datadog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/redismod">RedisMod</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/explore/riot">RIOT</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Operate</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Continuous Integration/Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/continuous-integration-continuous-deployment">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/continuous-integration-continuous-deployment/jenkins">Redis using Jenkins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/continuous-integration-continuous-deployment/circleci">Redis using CircleCI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/continuous-integration-continuous-deployment/argocd">Redis using Argo CD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Observability</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/observability">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/observability/redisdatasource">Redis Data Source for Grafana</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/observability/redisexplorer">Grafana Dashboards for Redis Enterprise Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/observability/datadog">Redis Enterprise Observability with Datadog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/observability/prometheus">Using RedisTimeSeries with Prometheus and Grafana</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Provisioning</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/provisioning">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/provisioning/terraform">Deploy and Manage Redis Database on AWS using Terraform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/provisioning/azure-cache-terraform">Azure Cache for Redis Enterprise using Terraform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/provisioning/azure-cache-terraform-private">Azure Cache for Redis Enterprise using Terraform with Private Link</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Orchestration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/orchestration">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/orchestration/docker/">Redis on Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/docker/nodejs-nginx-redis">Node.js, Nginx, Redis and Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/orchestration/kubernetes/">Redis on Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operate/orchestration/kubernetes-operator">Kubernetes Operator: What It Is and Why You Should Really Care About It</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">HowTos &amp; Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisearch">RediSearch Tutorial</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RedisJSON Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/getting-started">Storing and Querying JSON documents</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/using-python">RedisJSON and Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/using-nodejs">RedisJSON and Node.js</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/using-ruby">RedisJSON and Ruby</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/using-go">RedisJSON and Go</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/using-java">RedisJSON and Java</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/using-redisinsight">RedisJSON using RedisInsight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/storing-complex-json-document">Storing and retrieving Nested JSON document</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/jsonind-document">Indexing JSON document using RediSearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/redisjson-cheatsheet">RedisJSON CheatSheet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/shoppingcart">How to build a Shopping cart app using NodeJS and RedisJSON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisjson/storing-json-using-nodejs">Storing and retrieving JSON documents using Node.js</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RedisTimeSeries Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redistimeseries/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redistimeseries/getting-started">Storing and Querying Time Series data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redistimeseries/using-python">RedisTimeSeries and Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redistimeseries/using-dotnet">Using RedisTimeSeries with .NET</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redistimeseries/using-go">RedisTimeSeries and Go</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redistimeseries/using-prometheus">Using RedisTimeSeries with Prometheus and Grafana</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RedisGraph Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/getting-started">Getting Started with RedisGraph</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/explore-python-code">Explore Python Codebase using RedisGraph</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/using-redisinsight">RedisGraph using RedisInsight</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/using-dotnet">RedisGraph and .NET</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/using-python">RedisGraph and Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/using-ruby">RedisGraph and Ruby</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/using-javascript">RedisGraph and JavaScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/using-go">RedisGraph and Go</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/using-rust">RedisGraph and Rust</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/redisgraphmovies">Building Movies database app using RedisGraph &amp; NodeJS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraph/csvtograph">Building RedisGraph databases from CSV inputs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redis Bloom Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisbloom">Probabilistic data structures using Redis Stack</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisbloom/with-dotnet/redisbloom-withdotnet">Using RedisBloom with .NET</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgears">RedisGears Tutorial</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RedisAI Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisai/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisai/getting-started">RedisAI Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisai/market-basket-analysis">Market-Basket Analysis using RedisAI and RedisGears</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/leaderboard">How to build a Real-Time Leaderboard app Using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/ratelimiting">How to build a Rate Limiter using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/caching">How to cache REST API responses Using Redis &amp; NodeJS</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to list &amp; search Movies database using RediSearch</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/getting-started">1. Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/install">2. Install Redisearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/create">3. Create Index</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/query">4. Query Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/manage">5. Manage Index</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/import">6. Import datasets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/querymovies">7. Query Movies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/aggregation">8. Aggregation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/advancedoption">9. Advanced Option</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/moviesdatabase/sampleapp">10. Sample Application</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/chatapp">How to build a Chat application using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/frauddetection">How to build a Fraud Detection System using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/redisgraphmovies">Building Movies database app using RedisGraph and NodeJS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/nlp">Building a Pipeline for Natural Language Processing using RedisGears</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/hackernews">How to build a HackerNews Clone using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/antipatterns/">Redis Anti-Patterns Every Developer Should Avoid</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/socialnetwork/">Building a Social Network Application using RediSearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/security/">How to Use SSL/TLS With Redis Enterprise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/analytics">Building an Analytics dashboard app using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/popupstore">Building a Popup Store application using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/herokunodejs">How to build a NodeJS based application on Heroku using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/herokupython">How to build a Python based application on Heroku using Redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/howtos/herokujava">How to build a Java based application on Heroku using Redis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Involved</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/community/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/devcember/">DEVcember</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Hacktoberfest 2021</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/hacktoberfest/">Start Here</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/hacktoberfest/stories/lara-aasem">Lara&#x27;s Hacktoberfest at Redis Story</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/hacktoberfest/stories/vincent-aceto">Vincent&#x27;s Hacktoberfest at Redis Story</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/community/discord/">Discord</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/community/redis-live/">Redis Live</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_2AGf"><div class="docItemContainer_1tAC"><article><header><h1 class="docTitle_cWlf">Getting started with Redis Functions</h1></header><div class="docAuthors"><hr><div class="authorByline_1uE2"><img class="authorProfileImage_3uFP" src="/img/profile_pic_elena_kolevska.jpg" alt="Profile picture for Elena Kolevska"> <div><div class="authorLabel_3qT7">Author:</div><div><a href="https://twitter.com/elena_kolevska" target="_blank">Elena Kolevska</a>, Technical Enablement Manager</div></div></div><hr></div><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="getting-started-with-redis-functions"></a>Getting started with Redis Functions<a class="hash-link" href="#getting-started-with-redis-functions" title="Direct link to heading">#</a></h1><p>The most impactful addition to Redis version 7.0 is <strong>Redis Functions</strong> - a new programmability option, improving on scripts by <strong>adding modularity, reusability, and better overall developer experience</strong>. </p><p>Functions are, in contrast to scripts, persisted in the .rdb and .aof files as well as automatically replicated to all the replicas, which makes them a first-class citizen of Redis.</p><p>Redis has the capability of supporting multiple execution engines so in one of the future releases we‚Äôll be able to write Redis Functions in Lua, Javascript, and more languages, but at the moment (Redis v7.0) the only supported language is Lua.</p><p>A common pain point for developers is to maintain a consistent view of data entities through a logical schema. Redis Functions are ideally suited for solving this problem and in this tutorial, we will demonstrate just that - we‚Äôll create a library with two functions; the first one will make sure that we can automatically set  <code>_created_at</code> and <code>_updated_at</code>  timestamps for hash keys and the second one will simply update the <code>_updated_at</code> timestamp without changing the other elements, simulating the ‚Äútouch‚Äù Unix function. Let&#x27;s go!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="environment-setup"></a>Environment setup<a class="hash-link" href="#environment-setup" title="Direct link to heading">#</a></h3><p>First, let‚Äôs set up a working environment with Redis 7. You can follow the installation instructions in the guides below, according to your operating system:</p><ul><li><a href="https://redis.io/docs/getting-started/installation/install-redis-from-source/" target="_blank" rel="noopener noreferrer">Install Redis from Source</a></li><li><a href="https://redis.io/docs/getting-started/installation/install-redis-on-linux/" target="_blank" rel="noopener noreferrer">Install Redis on Linux</a></li><li><a href="https://redis.io/docs/getting-started/installation/install-redis-on-mac-os/" target="_blank" rel="noopener noreferrer">Install Redis on macOS</a></li><li><a href="https://redis.io/docs/getting-started/installation/install-redis-on-windows/" target="_blank" rel="noopener noreferrer">Install Redis on Windows</a></li></ul><p>Alternatively, you can  spin up a Docker container with Redis Stack:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker run -p 6379:6379 --name redis-7.0 -it --rm redis/redis-stack:7.0.0-RC4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><blockquote><p>Note: In the rest of this tutorial we‚Äôll use the <code>$</code> character to indicate that the command needs to be run on the command prompt and <code>redis-cli&gt;</code> to indicate the same for a redis-cli prompt._</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="warm-up"></a>Warm-Up<a class="hash-link" href="#warm-up" title="Direct link to heading">#</a></h3><p>Now that we have our Redis server running, we can create a file named <code>mylib.lua</code> and in it create a function named <code>hset</code> that would receive the keys and arguments we pass on the command line as parameters. </p><p><strong><em>Functions in Redis are always a part of a library, and a single library can have multiple functions. </em></strong></p><p>For starters, let&#x27;s create a simple function that returns &quot;Hello Redis 7.0&quot; and save it in the <code>mylib.lua</code> file. </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mylib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function hset(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return &quot;Hello Redis 7.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The first line specifies that we want to use the Lua engine to run this function and that its name is <code>mylib</code>.The name is the library identifier and we will use it every time we need to update it.</p><p>Next, we need to register this function so it can be accessed through the Functions api. In the registration we specify that the function <code>hset</code> can be called with the name of <code>my_hset</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_hset&#x27;, hset)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The full code, so far, is:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mylib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function hset(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return &quot;Hello Redis 7.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_hset&#x27;, hset)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Before we can call the function on the command line, we need to load and register it with the Redis server:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /path/to/mylib.lua | redis-cli -x FUNCTION LOAD</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Finally, let‚Äôs run the function we registered:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_hset 1 foo</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>You should see the greeting &quot;Hello Redis 7.0&quot; as a response.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="maintaining-a-consistent-view-of-data-entities-through-a-logical-schema"></a>Maintaining a consistent view of data entities through a logical schema<a class="hash-link" href="#maintaining-a-consistent-view-of-data-entities-through-a-logical-schema" title="Direct link to heading">#</a></h3><p>We&#x27;re now ready to start working on the requirement. First, let&#x27;s implement the part that adds an <em><em>updated</em></em>at  timestamp:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mylib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function hset(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]  -- Get the key name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = redis.call(&#x27;TIME&#x27;)[1]  -- Get the current time from the Redis server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Add the current timestamp to the arguments that the user passed to the function, stored in `args`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, &#x27;_updated_at&#x27;) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Run HSET with the updated argument list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, hash, unpack(args))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_hset&#x27;, hset)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>After you updated the code, you will have to reload the library in the Redis server, using the <code>replace</code> argument to specify that you want to overwrite the previous version:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /path/to/mylib.lua | redis-cli -x FUNCTION LOAD REPLACE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If you try to create and update a hash through our function now, you will see that a timestamp is automatically added to it:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_hset 1 foo k1 v1 k2 v2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; HGETALL foo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1) &quot;k1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;v1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3) &quot;k2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">4) &quot;v2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">5) &quot;_updated_at&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">6) &quot;1643581494&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If we try to update the same key, we will see that the <code>_updated_at</code> timestamp got updated too:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_hset 1 foo k4 v4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; HGETALL foo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1) &quot;k1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;v1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3) &quot;k2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">4) &quot;v2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">5) &quot;_updated_at&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">6) &quot;1643581580&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">7) &quot;k4&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">8) &quot;v4&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now let&#x27;s add the logic that checks if the key is being created or updated, and adds the <code>_created_at</code> timestamp accordingly:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mylib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function hset(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]  -- Get the key name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = redis.call(&#x27;TIME&#x27;)[1]  -- Get the current time from the Redis server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Check if the key exists and if not - add a `_created_at` timestamp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local exists = redis.call(&#x27;exists&#x27;, hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if exists==0 then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, &#x27;_created_at&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Add the current timestamp to the arguments that the user passed to the function, stored in `args`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, &#x27;_updated_at&#x27;) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Run HSET with the updated argument list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, hash, unpack(args))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_hset&#x27;, hset)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Reload the library:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /path/to/mylib.lua | redis-cli -x FUNCTION LOAD REPLACE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And try to create a new key:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_hset 1 bar k1 v1 k2 v2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; HGETALL bar</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1) &quot;k1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;v1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3) &quot;k2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">4) &quot;v2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">5) &quot;_updated_at&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">6) &quot;1643581710&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">7) &quot;_created_at&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">8) &quot;1643581710&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Both a <code>_created_at</code> and <code>_updated_at</code> timestamps were added. If we update the key, we will see that the <code>_updated_at</code> timestamp will change, while the <code>_created_at</code> will stay the same:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_hset 1 bar k4 v4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; HMGET bar _created_at _updated_at</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1) &quot;1643581710&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;1643581992&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The second requirement was to implement a function that will allow us to update the <code>_updated_at</code> timestamp without updating any other fields. For that, we&#x27;ll have to create a new function in our library:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function touch(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = redis.call(&#x27;TIME&#x27;)[1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, keys[1], &#x27;_updated_at&#x27;, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And we should also add the function registration:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_touch&#x27;, touch)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The full code will now look like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mylib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function hset(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]  -- Get the key name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = redis.call(&#x27;TIME&#x27;)[1]  -- Get the current time from the Redis server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local exists = redis.call(&#x27;exists&#x27;, hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if exists==0 then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, &#x27;_created_at&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Add the current timestamp to the arguments that the user passed to the function, stored in `args`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, &#x27;_updated_at&#x27;) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Run HSET with the updated argument list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, hash, unpack(args))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function touch(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = redis.call(&#x27;TIME&#x27;)[1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, keys[1], &#x27;_updated_at&#x27;, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_hset&#x27;, hset)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_touch&#x27;, touch)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Reload the updated library:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /path/to/mylib.lua | redis-cli -x FUNCTION LOAD REPLACE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And try running the new function and confirm that the <code>_updated_at</code> timestamp has indeed changed:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_touch 1 bar</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; HMGET bar _created_at _updated_at</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1) &quot;1643581710&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;1643582276&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="thinking-ahead"></a>Thinking ahead<a class="hash-link" href="#thinking-ahead" title="Direct link to heading">#</a></h3><p>One of the basic rules of software development is that you cannot rely on user input, so let‚Äôs make sure we don‚Äôt do that. If a user creates a string named <code>my_string</code> and tries to run the touch function on it they will get an error:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; SET my_string hello</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_hset 1 my_string k1 v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(error) WRONGTYPE Operation against a key holding the wrong kind of value script: my_hset, on @user_function:17.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Let‚Äôs handle this error by adding a type check:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if exists==1 and redis.call(&#x27;TYPE&#x27;, hash)[&quot;ok&quot;] ~= &#x27;hash&#x27; then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   error = &#x27;The key &#x27; .. hash .. &#x27; is not a hash&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   redis.log(redis.LOG_WARNING, error);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.error_reply(error)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The complete code:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mylib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function hset(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]  -- Get the key name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = redis.call(&#x27;TIME&#x27;)[1]  -- Get the current time from the Redis server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local exists = redis.call(&#x27;exists&#x27;, hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if exists==0 then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, &#x27;_created_at&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if exists==1 and redis.call(&#x27;TYPE&#x27;, hash)[&quot;ok&quot;] ~= &#x27;hash&#x27; then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       local error = &#x27;The key &#x27; .. hash .. &#x27; is not a hash&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       redis.log(redis.LOG_WARNING, error);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       return redis.error_reply(error)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Add the current timestamp to the arguments that the user passed to the function, stored in `args`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, &#x27;_updated_at&#x27;) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Run HSET with the updated argument list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, hash, unpack(args))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function touch(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = redis.call(&#x27;TIME&#x27;)[1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, keys[1], &#x27;_updated_at&#x27;, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_hset&#x27;, hset)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_touch&#x27;, touch)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If we reload the library and try again, we&#x27;ll get an error with a helpful message:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /path/to/mylib.lua | redis-cli -x FUNCTION LOAD REPLACE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL my_hset 1 my_string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(error) The key my_string is not a hash</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="refactoring"></a>Refactoring<a class="hash-link" href="#refactoring" title="Direct link to heading">#</a></h3><p>We can notice that we have some code repetition in our library, namely the type check and the getting of the timestamp in both our functions. That&#x27;s a good opportunity for some code reuse. Let&#x27;s extract the logic into their own functions:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function get_time()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     return redis.call(&#x27;TIME&#x27;)[1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function is_not_hash(key_name)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if redis.call(&#x27;TYPE&#x27;, key_name)[&#x27;ok&#x27;] ~= &#x27;hash&#x27; then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       return &#x27;The key &#x27; .. key_name .. &#x27; is not a hash.&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return nil</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This function is only going to be called by our two existing functions and not from the outside, so that&#x27;s why we don&#x27;t need to register it. The refactored code will now look like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mylib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Get the current time from the Redis server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function get_time()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     return redis.call(&#x27;TIME&#x27;)[1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function is_not_hash(key_name)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if redis.call(&#x27;TYPE&#x27;, key_name)[&#x27;ok&#x27;] ~= &#x27;hash&#x27; then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       return &#x27;The key &#x27; .. key_name .. &#x27; is not a hash.&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return nil</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function hset(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]  -- Get the key name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local time = get_time()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local exists = redis.call(&#x27;exists&#x27;, hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if exists==0 then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, &#x27;_created_at&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash_error = is_not_hash(hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if exists==1 and hash_error ~= nil then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       return redis.error_reply(hash_error)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Add the current timestamp to the arguments that the user passed to the function, stored in `args`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, &#x27;_updated_at&#x27;) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(args, time)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -- Run HSET with the updated argument list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, hash, unpack(args))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function touch(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash_error = is_not_hash(hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   if hash_error ~= nil then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       return redis.error_reply(hash_error)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return redis.call(&#x27;HSET&#x27;, hash, &#x27;_updated_at&#x27;, get_time())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_hset&#x27;, hset)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;my_touch&#x27;, touch)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-function-flags"></a>Using Function flags<a class="hash-link" href="#using-function-flags" title="Direct link to heading">#</a></h3><p>In this step, we&#x27;ll get familiar with the use of <a href="https://redis.io/docs/manual/programmability/functions-intro/#function-flags" target="_blank" rel="noopener noreferrer">Function flags</a> - a piece of information that describes the circumstances under which a function is allowed to run. Currently, we support 5 flags:</p><ul><li><code>no-writes</code> - this flag indicates that the script only reads data but never writes.</li><li><code>allow-oom</code> - this flag allows a script to execute even when the server is out of memory (OOM).</li><li><code>allow-stale</code> - this flag enables running the script against a stale replica.</li><li><code>no-cluster</code> - this flag doesn&#x27;t allow the script to run in a clustered database.</li><li><code>allow-cross-slot-keys</code> - this flag allows a script to access keys from multiple slots.</li></ul><p>To best illustrate why function flags are useful we&#x27;ll work with a simple example that gets the basic info and favourite colours of a user. Save the following snippet in a file named <code>get_user.lua</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mynewlib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function get_user(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]  -- Get the key name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local user = redis.call(&#x27;HGETALL&#x27;, hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local user_colours = redis.call(&#x27;SMEMBERS&#x27;, hash .. &#x27;:colours&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(user, #user+1, &#x27;colours&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(user, #user+1, user_colours)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return user</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function(&#x27;get_user&#x27;, get_user)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If we try to execute this function with <code>FCALL_RO</code> - the read-only variant of <code>FCALL</code>, we will get an error, even though it only performs read operations. In order to demonstrate that the function is read-only, we need to use the <code>no-writes</code> flag in its registration:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /path/to/get_user.lua | redis-cli -x FUNCTION LOAD</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL_RO get_user 1 user:1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(error) ERR Can not execute a script with write flag using *_ro command.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#!lua name=mynewlib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local function get_user(keys, args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local hash = keys[1]  -- Get the key name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local user = redis.call(&#x27;HGETALL&#x27;, hash)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   local user_colours = redis.call(&#x27;SMEMBERS&#x27;, hash .. &#x27;:colours&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(user, #user+1, &#x27;colours&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   table.insert(user, #user+1, user_colours)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return user</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis.register_function{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> function_name=&#x27;get_user&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> callback=get_user,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> flags={ &#x27;no-writes&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Finally, this will give us the expected result:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /path/to/get_user.lua | redis-cli -x FUNCTION LOAD REPLACE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli&gt; FCALL_RO get_user 1 user:1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1) &quot;email&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;foo@bar.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3) &quot;colours&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">4) 1) &quot;green&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  2) &quot;red&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  3) &quot;blue&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>That&#x27;s it, you now know how to write, load and execute Redis Function. Congratulations!</p><p>For more information on Redis Functions you can check the <a href="https://redis.io/docs/manual/programmability/functions-intro/" target="_blank" rel="noopener noreferrer">Redis Functions documentation</a> and to learn more about the Lua API you can check the <a href="https://redis.io/docs/manual/programmability/lua-api/" target="_blank" rel="noopener noreferrer">Redis Lua API Reference</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/redis-developer/redis-developer/edit/master/docs/create/redis-functions/index-redis-functions.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-05-13T09:25:51.000Z" class="docLastUpdatedAt_1gIo">5/13/2022</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/create/redis-stack"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Introduction to Redis Stack</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/create/rediscloud"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create database using Redis Enterprise Cloud ¬ª</div></a></div></nav></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><svg width="785" height="158" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="shape"><defs><path d="M786.344 392.459c-41.822 22.164-258.313 110.84-305.056 135.477-46.742 24.637-72.163 23.812-108.246 6.57-36.082-17.24-267.334-111.664-309.156-131.377-41.822-19.713-42.642-33.657-1.64-49.271C103.25 338.265 332.86 247.94 381.243 229.875c48.383-18.065 65.604-18.065 106.605-2.473 41.003 15.614 256.674 100.996 297.676 115.785 41.002 14.791 42.642 27.912.82 49.273v-.001z" id="a"></path><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="785" height="331" fill="#fff"><use xlink:href="#a"></use></mask></defs><use mask="url(#b)" xlink:href="#a" transform="translate(-32 -216)" stroke="#465282" stroke-width="4" fill="none" fill-rule="evenodd" stroke-dasharray="3.637"></use></svg><img src="/img/code-2.png" class="code" alt=""><div class="row"><div class="col col--3"><div class="footer__logo-ctr"><span class="footer__logo-tagline">Made with &lt;/&gt; by</span><a href="https://redis.com/" target="_blank" rel="noopener" class="footerLogoLink_3L_r"><img loading="lazy" class="footer__logo" alt="Redis logo" src="/img/redis_logo_red_white_rgb.svg"></a></div></div><div class="col col--9"><div class="row footer__links"><div class="col col--4 footer__col"><h4 class="footer__title">Get Started</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/create/rediscloud">Create Database</a></li><li class="footer__item"><a class="footer__link-item" href="/develop/">Develop</a></li><li class="footer__item"><a class="footer__link-item" href="/explore/redisinsight/">Explore your data</a></li><li class="footer__item"><a href="https://redis.com/redis-best-practices/introduction/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Best Practices</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/create/redis-stack/">Redis Stack</a></li></ul></div><div class="col col--4 footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a href="https://redis.com/community/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community</a></li><li class="footer__item"><a href="https://university.redis.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Redis University</a></li><li class="footer__item"><a href="https://redis.io/commands" target="_blank" rel="noopener noreferrer" class="footer__link-item">Command Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/howtos">How-tos &amp; tutorials</a></li></ul></div></div></div></div><div class="footer__copyright">Copyright: ¬© 2022 Redis. All rights reserved. Redis and the cube logo are registered trademarks of Redis Ltd.</div></div></footer></div>
<script src="/styles.b8c9ebeb.js"></script>
<script src="/runtime~main.1991f51a.js"></script>
<script src="/main.63ac166d.js"></script>
<script src="/1.69e91d25.js"></script>
<script src="/2.498954a0.js"></script>
<script src="/3.29c624a1.js"></script>
<script src="/1be78505.b84ba4a0.js"></script>
<script src="/935f2afb.e3521e56.js"></script>
<script src="/17896441.59891c0c.js"></script>
<script src="/a5b41932.aaa88fb3.js"></script>
</body>
</html>