<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-create/aws/slackbot/index-slackbot">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">How to Build a Slack Bot to Retrieve Lost Files Using AWS S3 and Redis Search and Query Engine | The Home of Redis Developers</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.redis.com/img/redis-hero-image.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.redis.com/img/redis-hero-image.jpg"><meta data-rh="true" property="og:url" content="https://developer.redis.com/create/aws/slackbot"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to Build a Slack Bot to Retrieve Lost Files Using AWS S3 and Redis Search and Query Engine | The Home of Redis Developers"><meta data-rh="true" name="description" content="alt_text"><meta data-rh="true" property="og:description" content="alt_text"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.redis.com/create/aws/slackbot"><link data-rh="true" rel="alternate" href="https://developer.redis.com/create/aws/slackbot" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.redis.com/create/aws/slackbot" hreflang="x-default"><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-W8Z6BLQ",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.b5561ee1.css">
<link rel="preload" href="/assets/js/runtime~main.109933d1.js" as="script">
<link rel="preload" href="/assets/js/main.4ee8c403.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8Z6BLQ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:rgb(210, 215, 254);color:rgb(22 31 49)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><div class="announcement-bar"><a href="https://redis.com/blog/introducing-redis-7-2/" target="_blank" rel="noopener"><span>Announcing Redis 7.2 and Enhanced Vector DB</span> <span style="margin-left:1rem">Learn more</span> <span style="margin-left:0.25rem">→</span></a></div></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div id="redis-sitesearch" class="redis-sitesearch redis-sitesearch-inline"><input class="redis-sitesearch-input"><div class="redis-sitesearch-result-list-wrapper"><ul class="redis-sitesearch-result-list"></ul><div class="redisearch-logo"></div></div></div></div><a class="navbar__item navbar__link" href="/howtos/quick-start">Get started</a><a href="https://launchpad.redis.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Redis Launchpad<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://redis.com/try-free/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Try Free<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--dark_i4oU"></a><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/howtos/quick-start">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/create">Create</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/create">Overview - All Quick Starts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/create/redis-functions">Redis Functions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/create/azure">Redis on Azure Cache</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/create/aws">Redis on AWS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/create/aws">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/create/aws/redis-on-aws">Redis on AWS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/create/aws/slackbot">Building a Slack Bot using AWS S3 and Redis Search and Query Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/create/aws/terraform">Deploy and Manage Redis Database on AWS using Terraform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/create/aws/bidding-on-aws">Building a Real-Time Bidding Platform using NodeJS, AWS Lambda and Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/create/aws/import/database-migration-aws-elasticache-redis-enterprise-cloud/">Online Data Migration from AWS Elasticache to Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/create/aws/chatapp">Building a Real-Time Chat application on AWS using Python and Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/create/aws/analytics-using-aws">Building an Analytics Dashboard using NodeJS, Redis and AWS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/create/docker/">Redis on Docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/create/kubernetes/">Redis on Kubernetes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/create/windows">Redis on Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/create/jenkins">Redis using Jenkins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/create/azurefunctions">Redis using Azure Functions</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/develop">Develop</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/explore">Explore</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/operate/observability/redisdatasource">Operate</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/howtos/quick-start/cheat-sheet">HowTos &amp; Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/community/">Get Involved</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ebooks/8-nosql-data-modeling-patterns">E-books</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Create</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Redis on AWS</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Building a Slack Bot using AWS S3 and Redis Search and Query Engine</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to Build a Slack Bot to Retrieve Lost Files Using AWS S3 and Redis Search and Query Engine</h1></header><div class="docAuthors"><hr><div class="authorByline_VoxI"><img class="authorProfileImage_URwT" src="/img/profile_pic_ajeet_raina.jpg" alt="Profile picture for Ajeet Raina"><div><div class="authorLabel_a70t">Author:</div><div><a href="https://twitter.com/ajeetsraina" target="_blank">Ajeet Raina</a>, <!-- -->Former Developer Growth Manager at Redis</div></div></div><hr></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image7-7b078dee13c6e0a2600024c34b7448a4.png" width="1200" height="900" class="img_ev3q"></p><p>If you work remotely then you’re likely to have come across Slack at some point. And if you use Slack on a daily basis, then you’ll be all too aware of how easy it can be to lose files. Being pinged every day by different employees across different channels makes it difficult to keep track of files.</p><p>Eventually, you may be forced to rummage through a cluttered library of documents in search of that one <!-- -->_<!-- -->crucial <!-- -->_<!-- -->document that’s needed for a task, report or even a meeting. We’ve all been there and the frustration is just as real as it is irritating...which is why <a href="https://launchpad.redis.com/?id=project%3AReeko-Slack-Bot" target="_blank" rel="noopener noreferrer">this Launchpad App</a> has created an application to remove this impediment.</p><p>It was a tricky application to make, requiring a lot of attention to detail across a number of different components for it to come to fruition. However, the success of this application was possible due to Redis’ ability to extract and process data proficiently.</p><p>Thanks to Redis, all of the components functioned harmoniously with one another, creating a fully optimal application that interacts with users in real-time.</p><p>Let’s take a look at how this was done. Before we dive in, we’d also like to point out that we have a variety of exciting applications for you to check out in our <a href="https://launchpad.redis.com/" target="_blank" rel="noopener noreferrer">Redis Launchpad</a>.</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image21-c1873b4103df7618f3843bfc1d395d5c.png" width="1702" height="950" class="img_ev3q"></p><ol><li>What will you build?</li><li>What will you need?</li><li>Architecture overview</li><li>Getting started</li><li>How it works</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-1-what-will-you-build">Step 1. What will you build?<a class="hash-link" href="#step-1-what-will-you-build" title="Direct link to heading">​</a></h3><p>You’ll build a special search engine that’s designed to retrieve lost files in Slack. This is especially handy for people who work from home, where documents between channels are easily lost between employees.</p><p>Below we’ll go through each step chronologically and highlight what components are required to create this application.</p><p>Ready to get started? OK, let’s dive straight in.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-2-what-will-you-need">Step 2. What will you need?<a class="hash-link" href="#step-2-what-will-you-need" title="Direct link to heading">​</a></h3><ul><li><a href="https://slack.com/intl/en-gb/" target="_blank" rel="noopener noreferrer">Slack</a>: used as an instant messaging app that connects employees with one another.</li><li><a href="https://api.slack.com/block-kit" target="_blank" rel="noopener noreferrer">Slack Block Kit</a>: used as a UI framework for Slack apps that offers a balance of control and flexibility when building experiences.</li><li><a href="https://www.python.org/" target="_blank" rel="noopener noreferrer">Python</a>: the preferred programming language to connect Redis in the application.</li><li><a href="https://redis.io/docs/stack/" target="_blank" rel="noopener noreferrer">Redis Stack</a>: includes a built-in Search and Query feature that provides querying, secondary indexing and full-text search.</li><li><a href="https://aws.amazon.com/es/s3/" target="_blank" rel="noopener noreferrer">S3 bucket</a>: used as a public cloud storage resource in Amazon Web Services (AWS).</li><li><a href="https://aws.amazon.com/es/textract/" target="_blank" rel="noopener noreferrer">AWS Textract</a>: used as a machine learning service that automatically extracts text.</li><li><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Nodejs</a>: responsible for image generation.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-3-architecture">Step 3. Architecture<a class="hash-link" href="#step-3-architecture" title="Direct link to heading">​</a></h3><p>Let’s look at each of the components that creates the Reeko-Slack bot:</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image31-220762ae26515460ec1355040b2172a3.png" width="1999" height="1352" class="img_ev3q"></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-file_shared">1. file_shared<a class="hash-link" href="#1-file_shared" title="Direct link to heading">​</a></h4><ul><li>When a new file is shared in any public slack channel the file_share event is sent to the Slack Bot app.</li><li>The file name is added as a suggestion using the <a href="https://redis.io/commands/?group=search" target="_blank" rel="noopener noreferrer"><code>FT.SUGADD</code></a> command in Redis.</li><li>All file data is added using the <a href="https://redis.io/commands/?group=json" target="_blank" rel="noopener noreferrer"><code>JSON.SET</code></a> command.</li><li>The file is then stored on the S3 bucket as an object with the key as the filename.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-s3-get">2. S3-get<a class="hash-link" href="#2-s3-get" title="Direct link to heading">​</a></h4><ul><li>The <a href="https://redis.io/commands/?group=json" target="_blank" rel="noopener noreferrer"><code>JSON.GET</code></a> command checks whether the desired file exists.</li><li>The file will then be retrieved from the S3 bucket if found.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-s3-search">3. S3-search<a class="hash-link" href="#3-s3-search" title="Direct link to heading">​</a></h4><ul><li>The <a href="https://redis.io/commands/?group=search" target="_blank" rel="noopener noreferrer"><code>FT.SEARCH</code></a> command uses the Redis Search and Query engine to look for documents in the S3 bucket- Users are presented will be prompted with different file name suggestions based on what they’ve typed in the search bar.</li><li>Once the user chooses one of the file suggestions, it is then downloaded and sent back to Slack.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-s3-delete">4. S3-delete<a class="hash-link" href="#4-s3-delete" title="Direct link to heading">​</a></h4><ul><li>User types the file name from the<strong> command<!-- -->[&#x27;text&#x27;]</strong> parameter</li><li>The file data is deleted from Redis using the <a href="https://redis.io/commands/?group=json" target="_blank" rel="noopener noreferrer"><code>JSON.DEL</code></a> command and is also removed from Redis&#x27;s suggestions using the <code>FT.SUGDEL</code> command.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-summarise-document">5. Summarise-document<a class="hash-link" href="#5-summarise-document" title="Direct link to heading">​</a></h4><ul><li>The file name is identified from the <strong>command<!-- -->[&#x27;text&#x27;]</strong> parameter.</li><li>It is then retrieved from the S3 bucket through the <a href="https://redis.io/commands/?group=json" target="_blank" rel="noopener noreferrer">JSON.GET</a> command.</li><li>Users can either download the pdf or png file locally from the S3 bucket.</li><li>The text is extracted using <a href="https://aws.amazon.com/textract/" target="_blank" rel="noopener noreferrer">AWS Textract</a>.</li><li>The extracted text is then summarised using Hugging face transformers summarization pipeline. The text summary is also added back to the <code>JSON</code> document using <a href="https://redis.io/commands/?group=json" target="_blank" rel="noopener noreferrer"><code>JSON.SET</code></a> command.</li><li>A post request is then sent to the /create-image on the NodeJS backend with the file name and summary text.</li><li>An image is generated using a base template.</li><li>The image that is returned is saved to the S3 bucket and sent back to Slack.</li><li>The image URL is also added to the <code>JSON</code> document using <a href="https://redis.io/commands/?group=json" target="_blank" rel="noopener noreferrer"><code>JSON.SET</code></a> command.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-the-s3-bucket">What is the S3 bucket?<a class="hash-link" href="#what-is-the-s3-bucket" title="Direct link to heading">​</a></h3><p>The <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">S3 bucket</a> is a simple storage service from Amazon. It allows users to store objects through a web service interface. The product’s value comes from its ability to store, protect and retrieve data from ‘buckets’ at any time from anywhere and on any device.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-4-getting-started">Step 4. Getting started<a class="hash-link" href="#step-4-getting-started" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h4><ul><li>Python 3.6+</li><li>ngrok</li><li>AWS Account</li><li>Slack</li><li>Docker</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-run-redis-docker-container">1. Run Redis Docker container<a class="hash-link" href="#1-run-redis-docker-container" title="Direct link to heading">​</a></h3><p>This simple container image bundles together the latest stable releases of Redis and select Redis modules from Redis Labs. This image is based on the official image of Redis from Docker. By default, the container starts with Redis&#x27; default configuration and all included modules loaded.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run -d -p </span><span class="token number" style="color:rgb(247, 140, 108)">6379</span><span class="token plain">:6379 redis/redis-stack</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-setup-a-python-environment">2. Setup a Python environment<a class="hash-link" href="#2-setup-a-python-environment" title="Direct link to heading">​</a></h3><p>To test the integration, Python needs to be installed on your computer. You can get a suitable release from <a href="https://www.python.org/downloads/" target="_blank" rel="noopener noreferrer">here</a>. To check your Python version, follow the command below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> # Python 3.6+ required</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> git clone https://github.com/redis-developer/Reeko-Slack-Bot</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> cd Reeko-Slack-Bot</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> python3 -m venv env</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> source env/bin/activate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> cd python-backend</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> pip3 install -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-using-ngrok-as-a-local-proxy">3. Using ngrok as a local proxy<a class="hash-link" href="#3-using-ngrok-as-a-local-proxy" title="Direct link to heading">​</a></h3><p>To develop locally we&#x27;ll be using ngrok. This will allow you to expose a public endpoint that Slack can use to send your app events. If you haven&#x27;t already, <a href="https://ngrok.com/download" target="_blank" rel="noopener noreferrer">install ngrok from their website</a> .</p><p>The ngrok exposes local networked services behind NATs and firewalls to the public internet over a secure tunnel. Share local websites, build/test webhook consumers and self-host personal services.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-setting-up-an-aws-account">4. Setting up an AWS Account<a class="hash-link" href="#4-setting-up-an-aws-account" title="Direct link to heading">​</a></h3><p>For testing you need a verified aws account. You can get your credentials file at ~/.aws/credentials (C:\Users\USER_NAME.aws\credentials for Windows users) and copy the following lines in the <a href="https://github.com/redis-developer/Reeko-Slack-Bot/blob/master/python-backend/.env" target="_blank" rel="noopener noreferrer">.env</a> file.</p><p>Also make sure to add your S3 bucket name in the .env file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> AWS_ACCESS_KEY_ID=&quot;YOUR_ACCESS_KEY_ID&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> AWS_SECRET_ACCESS_KEY=&quot;YOUR_SECRET_ACCESS_KEY&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BUCKET_NAME=&quot;YOUR_BUCKET_NAME&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-install-slack-on-your-local-system">5. Install Slack on your local system<a class="hash-link" href="#5-install-slack-on-your-local-system" title="Direct link to heading">​</a></h3><p>Slack needs to be installed on your computer. If it hasn’t been installed, you can get it from here for <a href="https://slack.com/intl/en-in/downloads/windows" target="_blank" rel="noopener noreferrer">Windows</a> or <a href="https://slack.com/intl/en-in/downloads/mac" target="_blank" rel="noopener noreferrer">Mac</a>. If you don’t already have an account you can make one <a href="https://slack.com/get-started#/create" target="_blank" rel="noopener noreferrer">here</a>.</p><p>To get started, you&#x27;ll need to create a new Slack app by clicking on the following link - <a href="https://api.slack.com/apps" target="_blank" rel="noopener noreferrer">https://api.slack.com/apps</a>
The foundational framework we’ll be using is Bolt. This will make it easier to build Slack apps with the platform’s latest features.</p><ol><li>Click on the <code>Create an App</code> button</li><li>Name the application ‘Reeko’ and choose the development workspace. \</li></ol><p><img loading="lazy" alt="alt_text" src="/assets/images/image3-4fc8919a43fe7e43a45a4b48f49f3edc.png" width="1448" height="730" class="img_ev3q"></p><p><img loading="lazy" alt="alt_text" src="/assets/images/image35-84f72bb81459d5d01625bc8f83870f47.png" width="1138" height="1044" class="img_ev3q"></p><ol start="3"><li>Requesting scopes - <a href="https://api.slack.com/scopes" target="_blank" rel="noopener noreferrer">Scopes</a> give your app permission to do things (for example, post messages) in your development workspace. You can select the scopes to add to your app by navigating over to the <em>OAuth &amp; Permissions</em> sidebar.</li><li>Add the <em>Bot Token Scopes</em> by clicking on the <code>Add an OAuth Scope </code>button.</li></ol><table><thead><tr><th>OAuth Scope</th><th>Description</th></tr></thead><tbody><tr><td>channels:history</td><td>View messages and other content in public channels that reeko has been added to</td></tr><tr><td>channels:join</td><td>Join public channels in a workspace</td></tr><tr><td>channels:read</td><td>View basic information about public channels in a workspace</td></tr><tr><td>channels:join</td><td>Join public channels in a workspace</td></tr><tr><td>chat:write</td><td>Send messages as @reeko</td></tr><tr><td>chat:write.customize</td><td>Send messages as @reeko with a customized username and avatar</td></tr><tr><td>chat:write.public</td><td>Send messages to channels @reeko isn&#x27;t a member of</td></tr><tr><td>files:read</td><td>View files shared in channels and conversations that reeko has been added to</td></tr><tr><td>files:write</td><td>Upload, edit, and delete files as reeko</td></tr></tbody></table><ol><li>Add the <em>User Token Scopes</em> by clicking on the <code>Add an OAuth Scope </code>button</li></ol><table><thead><tr><th>OAuth Scope</th><th>Description</th></tr></thead><tbody><tr><td>channels:history</td><td>View messages and other content in public channels that Reeko has been added to.</td></tr><tr><td>files:read</td><td>View files shared in channels and conversations that Reeko has been added to.</td></tr></tbody></table><ol><li>Install your own app by selecting the <code>Install App</code> button at the top of the OAuth &amp; Permissions page, or from the sidebar.</li><li>After clicking through one more green <code>Install App To Workspace</code> button, you&#x27;ll be sent through the Slack OAuth UI.</li><li>After installation, you&#x27;ll land back in the <em>OAuth &amp; Permissions</em> page and find a <em>Bot User OAuth Access Token.</em> and a <em>User OAuth Token</em>. Click on the copy button for each of them. These tokens need to be added to the <a href="https://github.com/redis-developer/Reeko-Slack-Bot/blob/master/python-backend/.env" target="_blank" rel="noopener noreferrer">.env</a> file. (The bot token starts with xoxb whereas the user token is longer and starts with xoxp).</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SLACK_USER_TOKEN=xoxp-your-user-token</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SLACK_BOT_TOKEN=xoxb-your-bot-token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image20-01ea9b858caabd5e8ff01941928c9365.png" width="1452" height="992" class="img_ev3q"></p><ol><li>As well as the access token, you&#x27;ll need a signing secret. Your app&#x27;s signing secret verifies that incoming requests are coming from Slack. Navigate to the <em>Basic Information</em> page from your <a href="https://api.slack.com/apps" target="_blank" rel="noopener noreferrer">app management page</a>. Under App Credentials, copy the value for <em>Signing Secret</em> and add it to the <a href="https://github.com/redis-developer/Reeko-Slack-Bot/blob/master/python-backend/env" target="_blank" rel="noopener noreferrer">.env</a> file.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SLACK_SIGNING_SECRET=your-signing-secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image8-c46123bdcd277b280ca7946609c74d65.png" width="1426" height="1360" class="img_ev3q"></p><ol><li>Make sure you have followed the steps in <a href="https://github.com/redis-developer/Reeko-Slack-Bot/tree/master/python-backend#Cloning-the-repo" target="_blank" rel="noopener noreferrer">Cloning the repo</a> to start the bolt app. The HTTP server is using a built-in development adapter, which is responsible for handling and parsing incoming events from Slack on port 3000.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">python3 app.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image6-66e225d8e3ac455f6625313c2a15c0b2.png" width="1418" height="264" class="img_ev3q"></p><p>Open a new terminal and ensure that you&#x27;ve installed <a href="https://github.com/redis-developer/Reeko-Slack-Bot/tree/master/python-backend#ngrok" target="_blank" rel="noopener noreferrer">ngrok</a>. Make sure to tell ngrok to use port 3000 (which Bolt for Python uses by default):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ngrok http 3000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image22-60a55e637464b48fae42e8e64218cf5c.gif" width="704" height="364" class="img_ev3q"></p><p>For local slack development, we&#x27;ll use your ngrok URL from above, so copy it to your clipboard.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://your-own-url.ngrok.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>Now we’re going to subscribe to events. Your app can listen to all sorts of events that are happening around your workspace - messages being posted, files being shared and more. On your app configuration page, select the <em>Event Subscriptions</em> sidebar. You&#x27;ll be presented with an input box to enter a Request URL, which is where Slack sends the events your app is subscribed to. Hit the <em>save</em> button.</li></ol><p>By default Bolt for Python listens for all incoming requests at the /slack/events route, so for the Request URL you can enter your ngrok URL appended with /slack/events:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://your-own-url.ngrok.io/slack/events</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the challenge was successful, you’ll get “verified” right next to the Request URL.</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image15-33d44508532620d69c7732c862ab47dd.png" width="1466" height="812" class="img_ev3q"></p><p>On the same page click on the <code>Subscribe to bot events</code> menu that sits at the bottom of the page. Click on the <code>Add Bot User Event</code>.</p><p>Similarly, click on <code>Subscribe to events on behalf of the user but</code> then click on <code>Add Workspace Event</code>.</p><p>Add the following scopes</p><table><thead><tr><th>EventName</th><th>Description</th><th>Required Scope</th></tr></thead><tbody><tr><td>file_share</td><td>A file was shared</td><td>files:read</td></tr><tr><td>message.channels</td><td>A message was posted to a channel</td><td>channels: history</td></tr></tbody></table><p><img loading="lazy" alt="alt_text" src="/assets/images/image26-9d21664a22995c783024193362bd6653.png" width="676" height="694" class="img_ev3q"></p><ol><li>Select the <em>Interactivity &amp; Shortcuts</em> sidebar and toggle the switch as on. Again, for the Request URL, enter your ngrok URL appended with /slack/events:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://your-own-url.ngrok.io/slack/events</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image16-89b77887973a69d02488719999f1322d.png" width="1420" height="630" class="img_ev3q"></p><ol><li>Scroll down to the <em>Select Menus</em> section in the Options Load URL and enter your ngork URL appended with /slack/events:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://your-own-url.ngrok.io/slack/events</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image32-0d4eb63f90866b6042a048a2f6f6c67b.png" width="1406" height="632" class="img_ev3q"></p><ol><li>Finally we come to the slash commands. Slack&#x27;s custom slash commands perform a very simple task. First they take whatever text you enter after the command itself (along with some other predefined values). Next, they’ll send it to a URL and accept whatever the script returns. After this, Slack will post it as a Slackbot message to the person who issued the command. We have 5 slash commands to add in the workspace.</li></ol><p>Visit the <em>Slash Commands</em> sidebar and click on the <code>Create New Command</code> button to head over the Create New Command page. Add the Command, Request URL, Short Description and Usage hint, according to the table provided below.</p><p>Click on Save to return to the <em>Slash Commands.</em></p><table><thead><tr><th>Command</th><th>Request URL</th><th>Short Description</th><th>Usage Hint</th></tr></thead><tbody><tr><td>/s3-get</td><td><a href="https://your-own-url.ngrok.io/slack/events" target="_blank" rel="noopener noreferrer">https://your-own-url.ngrok.io/slack/events</a></td><td>Get a file from s3 bucket</td><td>filename</td></tr><tr><td>/s3-search</td><td><a href="https://your-own-url.ngrok.io/slack/events" target="_blank" rel="noopener noreferrer">https://your-own-url.ngrok.io/slack/events</a></td><td>Search for a file in S3</td><td></td></tr><tr><td>/s3-delete</td><td><a href="https://your-own-url.ngrok.io/slack/events" target="_blank" rel="noopener noreferrer">https://your-own-url.ngrok.io/slack/events</a></td><td>Deletes the given file from the s3 bucket</td><td>filename</td></tr><tr><td>/summarise-document</td><td><a href="https://your-own-url.ngrok.io/slack/events" target="_blank" rel="noopener noreferrer">https://your-own-url.ngrok.io/slack/events</a></td><td>Summarise a document</td><td>filename</td></tr></tbody></table><p><img loading="lazy" alt="alt_text" src="/assets/images/image28-15580542659fc641d13030cf8104bb77.png" width="594" height="727" class="img_ev3q"></p><p><img loading="lazy" alt="alt_text" src="/assets/images/image19-554762de3cea465d906b1c245d2cae66.png" width="574" height="735" class="img_ev3q"></p><p><img loading="lazy" alt="alt_text" src="/assets/images/image27-1b702bc476f57b9836f216ae07436e02.png" width="561" height="714" class="img_ev3q"></p><p><img loading="lazy" alt="alt_text" src="/assets/images/image19-554762de3cea465d906b1c245d2cae66.png" width="574" height="735" class="img_ev3q"></p><p><img loading="lazy" alt="alt_text" src="/assets/images/image4-a8ed359ce02d52c63255ff9d48add1dd.png" width="729" height="532" class="img_ev3q"></p><ol><li>Open the Slack channel and upload a file in any channel. Make sure to note the file name.</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6-setting-up-a-nodejs-backend">6. Setting up a NodeJS backend<a class="hash-link" href="#6-setting-up-a-nodejs-backend" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/redis-developer/Reeko-Slack-Bot/tree/master/nodejs-backend#GraphicsMagick" target="_blank" rel="noopener noreferrer">GraphicsMagick</a></li><li><a href="https://github.com/redis-developer/Reeko-Slack-Bot/tree/master/nodejs-backend#Nodejs" target="_blank" rel="noopener noreferrer">Nodejs</a></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getting-started">Getting Started:<a class="hash-link" href="#getting-started" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="alt_text" src="/assets/images/image13-c4881168422a81bdb7dea54bc0f6f701.png" width="311" height="177" class="img_ev3q"></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="graphicsmagick">GraphicsMagick<a class="hash-link" href="#graphicsmagick" title="Direct link to heading">​</a></h4><p>GraphicsMagick is a highly versatile piece of software used for image processing. To generate images, you need to have GraphicsMagick installed on your machine.</p><p>You can find the suitable release from <a href="http://www.graphicsmagick.org/download.html#download-sites" target="_blank" rel="noopener noreferrer">http://www.graphicsmagick.org/download.html#download-sites.</a></p><p><img loading="lazy" alt="alt_text" src="/assets/images/image17-c8790f181c3c3fc16f86320ef3911861.png" width="960" height="480" class="img_ev3q"></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodejs">Nodejs<a class="hash-link" href="#nodejs" title="Direct link to heading">​</a></h4><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Please follow all the steps in <a href="https://github.com/redis-developer/Reeko-Slack-Bot/blob/master/python-backend/README.md" target="_blank" rel="noopener noreferrer">python-backend/README.md</a> first.</p></div></div><p>Copy the AWS credentials from the <a href="https://github.com/redis-developer/Reeko-Slack-Bot/blob/master/python-backend/README.md" target="_blank" rel="noopener noreferrer">python-backend/.env</a> to the <a href="https://github.com/redis-developer/Reeko-Slack-Bot/blob/master/nodejs-backend/src/config/config.json" target="_blank" rel="noopener noreferrer">config.json</a> file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;accessKeyId&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;secretAccessKey&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;region&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Install all the packages and run the server.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image18-64c14385b49a25334df82c04eef5f8ab.png" width="1999" height="396" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7-connecting-slack-to-s3">7: Connecting Slack to S3<a class="hash-link" href="#7-connecting-slack-to-s3" title="Direct link to heading">​</a></h3><p>This step involves bringing your AWS S3 bucket to your Slack account. Doing this will allow you to upload, download or delete files from your workspace without writing a single line of code.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="s3-get-filename">/S3-get filename<a class="hash-link" href="#s3-get-filename" title="Direct link to heading">​</a></h4><p>The purpose of this command is to retrieve a specified file from the S3 bucket. Once you type in the name of the file in the search bar, Reeko will check whether this document exists. If the document doesn’t exist then it will return as false and nothing will be done.</p><p>If the file is found, then the JSON.GET command will capture its name and download it from the S3 bucket. The downloaded file is sent back as a direct message in Slack.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JSON.GET amazonshareholderletterpdf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image11-d9d7f0322348bcfd8e580113de874913.png" width="448" height="874" class="img_ev3q"></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="s3-delete-filename">/s3-delete filename<a class="hash-link" href="#s3-delete-filename" title="Direct link to heading">​</a></h4><p>This command involves deleting files from the S3 bucket. To achieve this you simply need to type in the file name in the search bar and Reeko will pull up the file as demonstrated below.</p><p>You’ll have the option to permanently delete the file from the S3 bucket. The file data is deleted from Redis using the JSON.DEL command and is removed from Search suggestions using the <code>FT.SUGDEL</code> command. You’ll be informed when the file is deleted.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FT.SUGDEL file-index &quot;amazon-shareholder-letter.pdf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">JSON.DEL amazonshareholderletterpdf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-8-file-searching">Step 8: File searching<a class="hash-link" href="#step-8-file-searching" title="Direct link to heading">​</a></h4><p>Have you ever searched for a file without being entirely sure what it is you’re looking for? You may remember snippets of the content but not enough to manually track down its location. Well due to Search’s autocomplete functionality this will no longer be a problem.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="s3-search">/s3-search<a class="hash-link" href="#s3-search" title="Direct link to heading">​</a></h4><p>This command first opens up a modal inside of Slack with a search bar. You’ll then be suggested different file names will then be suggested depending on whatever the text you’ve written is. The way this works is simple:</p><p>Let’s assume the bucket has documents called <code>abcd.csv</code>, <code>abcd.csv</code> and <code>abcdef.sv</code>. If you type <code>abc</code> into the search bar, you’ll get these three results as a list from the <code>FT.SEARCH</code> command. From here you’ll be able to select the file you’re looking for. Once selected, the file is downloaded and sent back to Slack.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FT.SEARCH file-index &quot;ama&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-9-document-summarization">Step 9: Document summarization<a class="hash-link" href="#step-9-document-summarization" title="Direct link to heading">​</a></h4><p>In this step, Reeko will extract all of the text from the documents and summarize the content of each one with an image. This will prevent you from having to tediously open each document to get access to important information. Here’s how to do it:</p><ol><li>Get the file name from the command<!-- -->[&#x27;text&#x27;]<!-- --> parameter.</li><li>If the file is found, you can get the file&#x27;s name by using the <code>JSON.GET</code> command.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> JSON.GET amazonshareholderletterpdf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Download the pdf or png file locally from S3 bucket</li><li>Extract the text using AWS Textract.</li><li>The extracted text is summarised using the Hugging face transformers summarisation pipeline. The text summary is also added back to the JSON document using <code>JSON.SET</code> command.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> JSON.SET amazonshareholderletterpdf .summary &#x27; Amazon has grown from having 158 employees to 614. We had just gone public at a split-adjusted stock price of $1. 50 per share.  In 1997, we hadnâ\x80\x99t invented prime, marketplace, alexa, or aws. If you want to be successful in business, you have to create more than you consume.  Your goal should be to create value for everyone you interact with. Stock prices are not about the past.  They are a prediction of future cash flows discounted back to the present.&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>A post request is then sent to the /create-image on the nodejs backend with the file name and summary text.</li><li>An image is generated using a base template.</li><li>The image that is returned is saved to the S3 bucket and sent back to Slack.</li><li>The image URL is also added to the JSON document using <code>JSON.SET</code> command.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> JSON.SET amazonshareholderletterpdf .file_path &#x27;https://bucket-1234.s3.amazonaws.com/b8bac45f-7f69-4c28-a26e-9888d9771bed-image.png&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Below we’ve used the <a href="https://s2.q4cdn.com/299287126/files/doc_financials/2021/ar/Amazon-2020-Shareholder-Letter-and-1997-Shareholder-Letter.pdf" target="_blank" rel="noopener noreferrer">Amazon 2020 shareholder letter</a> as an example of how a document can be summarized using Reeko.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-how-it-works">5. How it works<a class="hash-link" href="#5-how-it-works" title="Direct link to heading">​</a></h4><p>The Slack app is built using Bolt for Python framework. To connect the AWS S3 bucket and AWS Textract, use their respective <a href="https://github.com/boto/boto3" target="_blank" rel="noopener noreferrer">boto3</a> clients.</p><p>Slack is receptive to all events around your workspace such as messages being posted, files being shared, users joining the team, and more. To listen to events, Slack uses the Events API. And to enable custom interactivity, you can use the Block Kit.</p><p>Slash commands work in the following way. First they consider the text you enter after the command itself and then send it to a URL. They then accept whatever the script returns and post it as a Slackbot message to the person who issued the command. There’s a set of 4 slash commands that make the slackbot.</p><p>In the application there are two Redis Modules:</p><ul><li><a href="https://redis.io/docs/stack/json/" target="_blank" rel="noopener noreferrer">Redis JSON</a> - store file information like filename, summary and image url.</li><li><a href="https://redis.io/docs/stack/search/" target="_blank" rel="noopener noreferrer">Redis Search and Query</a> - searches for files in the S3 bucket</li></ul><p>The code below is used to initialize Redis in redisearch_connector.py. This is done by creating an index with the name <code>file_index.</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">from redisearch import Client, TextField, AutoCompleter, Suggestion</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class RedisSearchConnector():</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.index_name = &#x27;file_index&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.client = Client(self.index_name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.ac = AutoCompleter(self.index_name)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use the following code to initialise Redis JSON in redisjson_connector.py.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">from rejson import Client, Path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class RedisJsonConnector():</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.rj = Client(decode_responses=True)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And the code below is used to create an index in Redis</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FT.CREATE file-index ON HASH SCHEMA file_name TEXT SORTABLE file_id TEXT created TEXT timestamp TEXT mimetype TEXT filetype TEXT user_id TEXT size</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="conclusion-preventing-lost-files-with-redis">Conclusion: preventing lost files with Redis<a class="hash-link" href="#conclusion-preventing-lost-files-with-redis" title="Direct link to heading">​</a></h3><p>The advanced capabilities of Redis allowed this Launchpad App to create an invaluable asset to remote workers - to never lose a file again on Slack. Redis Stack offered a simple yet effective way of transmitting data to and from the S3 bucket with no lags, no pauses and no delays whatsoever. You can discover more about the ins and outs of how this app was made by simply <a href="https://launchpad.redis.com/?id=project%3AReeko-Slack-Bot" target="_blank" rel="noopener noreferrer">clicking here</a>.</p><p>Reeko is an innovative application that joins our <em>exciting</em> collection of apps that we currently have on the <a href="https://launchpad.redis.com/" target="_blank" rel="noopener noreferrer">Redis Launchpad</a>. By using Redis, programmers from all over the world are creating breakthrough applications that are having an impact on daily lives… <em>and you can too</em>.</p><p>So how can you change the world using Redis? For more inspiration, make sure to check out the other applications we have on our <a href="https://launchpad.redis.com/" target="_blank" rel="noopener noreferrer">Launchpad</a>.</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image21-c1873b4103df7618f3843bfc1d395d5c.png" width="1702" height="950" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="who-built-this-application">Who built this application?<a class="hash-link" href="#who-built-this-application" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sarthak-arora">Sarthak Arora<a class="hash-link" href="#sarthak-arora" title="Direct link to heading">​</a></h4><p>Being only 20 years old, Sarthak is a young yet highly-advanced programmer who’s already a 2x international Hacong winner.</p><p>To discover more about his work and his activity on GitHub, you can <a href="https://github.com/sarthakarora1208" target="_blank" rel="noopener noreferrer">check out his profile here</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h3><ul><li><a href="/create/aws/redis-on-aws">Create Redis database on AWS</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/redis-developer/redis-developer/edit/master/docs/create/aws/slackbot/index-slackbot.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-26T20:47:21.000Z">Oct 26, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/create/aws/redis-on-aws"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Redis on AWS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/create/aws/terraform"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploy and Manage Redis Database on AWS using Terraform</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#step-1-what-will-you-build" class="table-of-contents__link toc-highlight">Step 1. What will you build?</a></li><li><a href="#step-2-what-will-you-need" class="table-of-contents__link toc-highlight">Step 2. What will you need?</a></li><li><a href="#step-3-architecture" class="table-of-contents__link toc-highlight">Step 3. Architecture</a></li><li><a href="#what-is-the-s3-bucket" class="table-of-contents__link toc-highlight">What is the S3 bucket?</a></li><li><a href="#step-4-getting-started" class="table-of-contents__link toc-highlight">Step 4. Getting started</a></li><li><a href="#1-run-redis-docker-container" class="table-of-contents__link toc-highlight">1. Run Redis Docker container</a></li><li><a href="#2-setup-a-python-environment" class="table-of-contents__link toc-highlight">2. Setup a Python environment</a></li><li><a href="#3-using-ngrok-as-a-local-proxy" class="table-of-contents__link toc-highlight">3. Using ngrok as a local proxy</a></li><li><a href="#4-setting-up-an-aws-account" class="table-of-contents__link toc-highlight">4. Setting up an AWS Account</a></li><li><a href="#5-install-slack-on-your-local-system" class="table-of-contents__link toc-highlight">5. Install Slack on your local system</a></li><li><a href="#6-setting-up-a-nodejs-backend" class="table-of-contents__link toc-highlight">6. Setting up a NodeJS backend</a></li><li><a href="#7-connecting-slack-to-s3" class="table-of-contents__link toc-highlight">7: Connecting Slack to S3</a></li><li><a href="#conclusion-preventing-lost-files-with-redis" class="table-of-contents__link toc-highlight">Conclusion: preventing lost files with Redis</a></li><li><a href="#who-built-this-application" class="table-of-contents__link toc-highlight">Who built this application?</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><svg width="785" height="158" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="shape"><defs><path d="M786.344 392.459c-41.822 22.164-258.313 110.84-305.056 135.477-46.742 24.637-72.163 23.812-108.246 6.57-36.082-17.24-267.334-111.664-309.156-131.377-41.822-19.713-42.642-33.657-1.64-49.271C103.25 338.265 332.86 247.94 381.243 229.875c48.383-18.065 65.604-18.065 106.605-2.473 41.003 15.614 256.674 100.996 297.676 115.785 41.002 14.791 42.642 27.912.82 49.273v-.001z" id="a"></path><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="785" height="331" fill="#fff"><use xlink:href="#a"></use></mask></defs><use mask="url(#b)" xlink:href="#a" transform="translate(-32 -216)" stroke="#465282" stroke-width="4" fill="none" fill-rule="evenodd" stroke-dasharray="3.637"></use></svg><img src="/img/code-2.png" class="code" alt=""><div class="row"><div class="col col--3"><div class="footer__logo-ctr"><span class="footer__logo-tagline">Made with &lt;/&gt; by</span><a href="https://redis.com/" target="_blank" rel="noopener" class="footerLogoLink_fGS1"><img loading="lazy" class="footer__logo" alt="Redis logo" src="/img/redis_logo_red_white_rgb.svg"></a></div></div><div class="col col--9"><div class="row footer__links"><div class="col col--4 footer__col"><h4 class="footer__title">Get Started</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/develop/">Develop</a></li><li class="footer__item"><a href="https://redis.com/redis-best-practices/introduction/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Best Practices</a></li></ul></div><div class="col col--4 footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a href="https://redis.com/community/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community</a></li><li class="footer__item"><a href="https://university.redis.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Redis University</a></li><li class="footer__item"><a href="https://redis.io/commands" target="_blank" rel="noopener noreferrer" class="footer__link-item">Redis Commands</a></li><li class="footer__item"><a href="https://stackoverflow.com/search?q=redis" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div></div></div></div><div class="footer__copyright">Copyright: © 2023 Redis. All rights reserved. Redis and the cube logo are registered trademarks of Redis Ltd.</div></div></footer></div>
<script src="/assets/js/runtime~main.109933d1.js"></script>
<script src="/assets/js/main.4ee8c403.js"></script>
</body>
</html>